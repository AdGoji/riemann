<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>Riemann 0.1.2 API documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann 0.1.2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3>Namespaces</h3><ul><li><a href="riemann.bin.html">riemann.bin</a></li><li><a href="riemann.client.html">riemann.client</a></li><li><a href="riemann.common.html">riemann.common</a></li><li><a href="riemann.config.html">riemann.config</a></li><li><a href="riemann.core.html">riemann.core</a></li><li><a href="riemann.email.html">riemann.email</a></li><li><a href="riemann.folds.html">riemann.folds</a></li><li><a href="riemann.graphite.html">riemann.graphite</a></li><li><a href="riemann.index.html">riemann.index</a></li><li><a href="riemann.logging.html">riemann.logging</a></li><li><a href="riemann.pagerduty.html">riemann.pagerduty</a></li><li><a href="riemann.periodic.html">riemann.periodic</a></li><li><a href="riemann.pubsub.html">riemann.pubsub</a></li><li><a href="riemann.query.html">riemann.query</a></li><li><a href="riemann.server.html">riemann.server</a></li><li><a href="riemann.streams.html">riemann.streams</a></li></ul></div><div class="namespace-index" id="content"><h2>Riemann 0.1.2 API documentation</h2><div class="doc">A network event stream processor. Intended for analytics, metrics, and
alerting; and to glue various monitoring systems together.</div><div class="namespace"><h3><a href="riemann.bin.html">riemann.bin</a></h3><pre class="doc">Main function.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.bin.html#var--main">-main</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.client.html">riemann.client</a></h3><pre class="doc">Network client for connecting to a Riemann server. Usage:

(def c (tcp-client :host &quot;monitoring.local&quot;))

(send-event c {:service &quot;fridge&quot; 
               :state &quot;running&quot; 
               :metric 2.0
               :tags [&quot;joke&quot;]})

(query c &quot;tagged \&quot;joke\&quot;&quot;)
=&gt; [{:service &quot;fridge&quot; ... }]

(close c)

Clients are mildly resistant to failure; they will attempt to reconnect a
dropped connection once before giving up. They're backed by a
RiemannRetryingTcpClient.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.client.html#var-close-client">close-client</a></li><li><a href="riemann.client.html#var-query">query</a></li><li><a href="riemann.client.html#var-reconnect-client">reconnect-client</a></li><li><a href="riemann.client.html#var-send-event">send-event</a></li><li><a href="riemann.client.html#var-tcp-client">tcp-client</a></li><li><a href="riemann.client.html#var-udp-client">udp-client</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.common.html">riemann.common</a></h3><pre class="doc">Utility functions. Time/date, some flow control constructs, protocol buffer
definitions and codecs, some vector set ops, etc.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.common.html#var-approx-equal">approx-equal</a></li><li><a href="riemann.common.html#var-decode">decode</a></li><li><a href="riemann.common.html#var-decode-inputstream">decode-inputstream</a></li><li><a href="riemann.common.html#var-decode-pb-event">decode-pb-event</a></li><li><a href="riemann.common.html#var-decode-pb-msg">decode-pb-msg</a></li><li><a href="riemann.common.html#var-decode-pb-query">decode-pb-query</a></li><li><a href="riemann.common.html#var-disjoint%3F">disjoint?</a></li><li><a href="riemann.common.html#var-encode">encode</a></li><li><a href="riemann.common.html#var-event">event</a></li><li><a href="riemann.common.html#var-event-to-json">event-to-json</a></li><li><a href="riemann.common.html#var-linear-time">linear-time</a></li><li><a href="riemann.common.html#var-member%3F">member?</a></li><li><a href="riemann.common.html#var-overlap%3F">overlap?</a></li><li><a href="riemann.common.html#var-post-load-event">post-load-event</a></li><li><a href="riemann.common.html#var-pre-dump-event">pre-dump-event</a></li><li><a href="riemann.common.html#var-re-matches%3F">re-matches?</a></li><li><a href="riemann.common.html#var-subset%3F">subset?</a></li><li><a href="riemann.common.html#var-time-at">time-at</a></li><li><a href="riemann.common.html#var-unix-time">unix-time</a></li><li><a href="riemann.common.html#var-unix-to-iso8601">unix-to-iso8601</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.config.html">riemann.config</a></h3><pre class="doc">Riemann config files are eval'd in the context of this namespace. Includes
streams, client, email, logging, and graphite; the common functions used in
config. Provides a default core and functions ((tcp|udp)-server, streams,
index) which modify that core.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.config.html#var-core">core</a></li><li><a href="riemann.config.html#var-delete-from-index">delete-from-index</a></li><li><a href="riemann.config.html#var-include">include</a></li><li><a href="riemann.config.html#var-index">index</a></li><li><a href="riemann.config.html#var-periodically-expire">periodically-expire</a></li><li><a href="riemann.config.html#var-publish">publish</a></li><li><a href="riemann.config.html#var-pubsub">pubsub</a></li><li><a href="riemann.config.html#var-streams">streams</a></li><li><a href="riemann.config.html#var-subscribe">subscribe</a></li><li><a href="riemann.config.html#var-tcp-server">tcp-server</a></li><li><a href="riemann.config.html#var-udp-server">udp-server</a></li><li><a href="riemann.config.html#var-update-index">update-index</a></li><li><a href="riemann.config.html#var-ws-server">ws-server</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.core.html">riemann.core</a></h3><pre class="doc">Binds together an index, servers, and streams.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.core.html#var-core">core</a></li><li><a href="riemann.core.html#var-delete-from-index">delete-from-index</a></li><li><a href="riemann.core.html#var-periodically-expire">periodically-expire</a></li><li><a href="riemann.core.html#var-start">start</a></li><li><a href="riemann.core.html#var-stop">stop</a></li><li><a href="riemann.core.html#var-update-index">update-index</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.email.html">riemann.email</a></h3><pre class="doc">Send email about events. Create a mailer with (mailer opts), then create
streams which send email with (your-mailer &quot;shodan@tau.ceti.five&quot;). Or
simply call email-event directly.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.email.html#var-email-event">email-event</a></li><li><a href="riemann.email.html#var-mailer">mailer</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.folds.html">riemann.folds</a></h3><pre class="doc">Functions for combining states.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.folds.html#var-maximum">maximum</a></li><li><a href="riemann.folds.html#var-mean">mean</a></li><li><a href="riemann.folds.html#var-median">median</a></li><li><a href="riemann.folds.html#var-minimum">minimum</a></li><li><a href="riemann.folds.html#var-sorted-sample">sorted-sample</a></li><li><a href="riemann.folds.html#var-sorted-sample-extract">sorted-sample-extract</a></li><li><a href="riemann.folds.html#var-sum">sum</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.graphite.html">riemann.graphite</a></h3><pre class="doc">Forwards events to Graphite.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.graphite.html#var-graphite">graphite</a></li><li><a href="riemann.graphite.html#var-graphite-path-basic">graphite-path-basic</a></li><li><a href="riemann.graphite.html#var-graphite-path-percentiles">graphite-path-percentiles</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.index.html">riemann.index</a></h3><pre class="doc">Maintains a stateful index of events by [host, service] key. Can be queried
to return the most recent indexed events matching some expression. Can expire
events which have exceeded their TTL. Presently the only implementation of
the index protocol is backed by a nonblockinghashmap, but I plan to add an
HSQLDB backend as well.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.index.html#var-clear">clear</a></li><li><a href="riemann.index.html#var-delete">delete</a></li><li><a href="riemann.index.html#var-delete-exactly">delete-exactly</a></li><li><a href="riemann.index.html#var-expire">expire</a></li><li><a href="riemann.index.html#var-index">index</a></li><li><a href="riemann.index.html#var-nbhm-index">nbhm-index</a></li><li><a href="riemann.index.html#var-search">search</a></li><li><a href="riemann.index.html#var-update">update</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.logging.html">riemann.logging</a></h3><pre class="doc">Configures log4j to log to a file. It's a trap!
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.logging.html#var-init">init</a></li><li><a href="riemann.logging.html#var-set-level">set-level</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.pagerduty.html">riemann.pagerduty</a></h3><pre class="doc">Forwards events to Pagerduty
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.pagerduty.html#var-pagerduty">pagerduty</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.periodic.html">riemann.periodic</a></h3><pre class="doc">Calls functions at regular intervals.
</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.periodic.html#var-after">after</a></li><li><a href="riemann.periodic.html#var-deferrable-every">deferrable-every</a></li><li><a href="riemann.periodic.html#var-every">every</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.pubsub.html">riemann.pubsub</a></h3><pre class="doc">Provides publish-subscribe handling of events. Publishers push events onto a
channel, which has n subscribers. Each subscriber subscribes to a channel
with an optional predicate function. Events which match the predicate are
sent to the subscriber.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.pubsub.html#var-dissoc-in">dissoc-in</a></li><li><a href="riemann.pubsub.html#var-publish">publish</a></li><li><a href="riemann.pubsub.html#var-pubsub-registry">pubsub-registry</a></li><li><a href="riemann.pubsub.html#var-subscribe">subscribe</a></li><li><a href="riemann.pubsub.html#var-unsubscribe">unsubscribe</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.query.html">riemann.query</a></h3><pre class="doc">The query parser. Parses strings into ASTs, and converts ASTs to functions
which match events.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.query.html#var-ast">ast</a></li><li><a href="riemann.query.html#var-fun">fun</a></li><li><a href="riemann.query.html#var-parse-string">parse-string</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.server.html">riemann.server</a></h3><pre class="doc">Accepts messages from external sources. Associated with a core. Sends
incoming events to the core's streams, queries the core's index for states.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.server.html#var-handle">handle</a></li><li><a href="riemann.server.html#var-http-query-map">http-query-map</a></li><li><a href="riemann.server.html#var-tcp-cpf">tcp-cpf</a></li><li><a href="riemann.server.html#var-tcp-handler">tcp-handler</a></li><li><a href="riemann.server.html#var-tcp-server">tcp-server</a></li><li><a href="riemann.server.html#var-udp-cpf">udp-cpf</a></li><li><a href="riemann.server.html#var-udp-handler">udp-handler</a></li><li><a href="riemann.server.html#var-udp-server">udp-server</a></li><li><a href="riemann.server.html#var-ws-index-handler">ws-index-handler</a></li><li><a href="riemann.server.html#var-ws-server">ws-server</a></li></ul></div></div><div class="namespace"><h3><a href="riemann.streams.html">riemann.streams</a></h3><pre class="doc">Streams are functions which accept events (or, in some cases, lists of
events). They can filter those events, transform them, apply them to other
streams, combine them over time, update state, forward to other services, and
more. Most streams accept, after their initial arguments, any number of
streams as children. When invoking children, they typically catch all
exceptions and log them, then proceed to the next child.

Any function accepting an event map (e.g. {:service &quot;foo&quot; :metric 3.5} can
be a stream. prn is a stream. So is (partial log :info), or (fn [x]). The
streams namespace aims to provide a comprehensive set of widely applicable,
combinable tools for building up more complicated streams.</pre><div class="index"><p>Public variables and functions:</p><ul><li><a href="riemann.streams.html#var-append">append</a></li><li><a href="riemann.streams.html#var-by">by</a></li><li><a href="riemann.streams.html#var-call-rescue">call-rescue</a></li><li><a href="riemann.streams.html#var-changed">changed</a></li><li><a href="riemann.streams.html#var-changed-state">changed-state</a></li><li><a href="riemann.streams.html#var-coalesce">coalesce</a></li><li><a href="riemann.streams.html#var-combine">combine</a></li><li><a href="riemann.streams.html#var-counter">counter</a></li><li><a href="riemann.streams.html#var-ddt">ddt</a></li><li><a href="riemann.streams.html#var-delete-from-index">delete-from-index</a></li><li><a href="riemann.streams.html#var-ewma-timeless">ewma-timeless</a></li><li><a href="riemann.streams.html#var-expired">expired</a></li><li><a href="riemann.streams.html#var-expired%3F">expired?</a></li><li><a href="riemann.streams.html#var-fill-in">fill-in</a></li><li><a href="riemann.streams.html#var-fill-in-last">fill-in-last</a></li><li><a href="riemann.streams.html#var-forward">forward</a></li><li><a href="riemann.streams.html#var-interpolate-constant">interpolate-constant</a></li><li><a href="riemann.streams.html#var-match">match</a></li><li><a href="riemann.streams.html#var-mean-over-time">mean-over-time</a></li><li><a href="riemann.streams.html#var-over">over</a></li><li><a href="riemann.streams.html#var-part-time-fast">part-time-fast</a></li><li><a href="riemann.streams.html#var-percentiles">percentiles</a></li><li><a href="riemann.streams.html#var-periodically-until-expired">periodically-until-expired</a></li><li><a href="riemann.streams.html#var-rate">rate</a></li><li><a href="riemann.streams.html#var-register">register</a></li><li><a href="riemann.streams.html#var-rollup">rollup</a></li><li><a href="riemann.streams.html#var-sum-over-time">sum-over-time</a></li><li><a href="riemann.streams.html#var-tagged-all">tagged-all</a></li><li><a href="riemann.streams.html#var-tagged-any">tagged-any</a></li><li><a href="riemann.streams.html#var-throttle">throttle</a></li><li><a href="riemann.streams.html#var-under">under</a></li><li><a href="riemann.streams.html#var-update-index">update-index</a></li><li><a href="riemann.streams.html#var-where">where</a></li><li><a href="riemann.streams.html#var-where-rewrite">where-rewrite</a></li><li><a href="riemann.streams.html#var-within">within</a></li><li><a href="riemann.streams.html#var-without">without</a></li></ul></div></div></div></body></html>